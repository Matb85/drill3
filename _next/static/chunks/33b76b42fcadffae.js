(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56106,(e,t,r)=>{t.exports=e.r(29527)},15288,44602,e=>{"use strict";var t=e.i(86143),r=e.i(75157);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function a({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>l,"CardFooter",()=>d,"CardHeader",()=>a,"CardTitle",()=>n],15288);var i=e.i(22828);let c="quiz-store-26-01-30",u={status:"idle",config:{shuffleQuestions:!0,shuffleAnswers:!0,scoring:"per-answer",penalty:"counterbalance",timePerQuestion:60,repeatIncorrect:!1},questions:[],activeQuestions:[],selectedOptions:{},results:[],currentIndex:0,fileName:null,pastedText:"",logs:[]};function x(e=320){return new Promise(t=>setTimeout(t,e))}async function m(t){return await x(),await e.A(18885).then(e=>e.parseQuestionsFromText(t))}async function h(){return await x(),{questions:structuredClone(await e.A(5708).then(e=>e.default)),log:[]}}let g=u,p=new Set;{let e=function(){try{let e=window.localStorage.getItem(c);return e?JSON.parse(e):null}catch(e){return console.warn("Failed to read quiz store",e),null}}();e&&(g={...u,...e,config:{...u.config,...e.config},logs:e.logs??[]})}function f(e){var t=g="function"==typeof e?e(g):e;try{window.localStorage.setItem(c,JSON.stringify(t))}catch(e){console.warn("Failed to persist quiz store",e)}p.forEach(e=>e())}function b(e){let t=[...e];for(let e=t.length-1;e>0;e-=1){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}function y(e){let t=e.results.filter(e=>e.isCorrect).length,r=e.results.filter(e=>e.partial&&!e.isCorrect).length,s=e.results.length-t-r,a=e.results.reduce((e,t)=>e+t.score,0),n=Math.round(a/Math.max(e.activeQuestions.length||e.results.length||1,1)*100);return{correct:t,partial:r,incorrect:s,scorePoints:a,scorePercent:n}}e.s(["quizStore",0,{getState:()=>g,useStore(e){let t=(0,i.useRef)(e);t.current=e;let[r,s]=(0,i.useState)(()=>t.current(g));return(0,i.useEffect)(()=>{let e=()=>s(t.current(g));return e(),p.add(e),()=>void p.delete(e)},[]),r},setConfig(e){f(t=>({...t,config:{...t.config,...e}}))},setPastedText(e){f(t=>({...t,pastedText:e}))},reset(){f(u)},restartProgress(){f(e=>({...e,status:"ready",selectedOptions:{},results:[],currentIndex:0}))},async loadFromFile(e){f(t=>({...t,status:"loading",fileName:e?.name??null}));let{questions:t,log:r}=await m(await e?.text()??"");return console.log("Parsed questions from file:",t),f(e=>({...e,status:"ready",questions:t,activeQuestions:[],results:[],selectedOptions:{},currentIndex:0,logs:r})),{questions:t,log:r}},async loadFromText(e){f(t=>({...t,status:"loading",pastedText:e}));let{questions:t,log:r}=await m(e);return f(e=>({...e,status:"ready",questions:t,activeQuestions:[],results:[],selectedOptions:{},currentIndex:0,logs:r})),{questions:t,log:r}},async loadSample(){f(e=>({...e,status:"loading"}));let{questions:e,log:t}=await h();return f(r=>({...r,status:"ready",questions:e,activeQuestions:[],results:[],selectedOptions:{},currentIndex:0,logs:t})),{questions:e,log:t}},async startTest(){var e,t;let r;if(f(e=>({...e,status:"loading"})),!g.questions.length)return!1;let s=(e=g.questions,r=(t=g.config).shuffleQuestions?b(e):[...e],t.shuffleAnswers?r.map(e=>({...e,answers:b(e.answers)})):r);return console.log("Prepared questions:",s),f(e=>({...e,status:"testing",activeQuestions:s,selectedOptions:{},results:[],currentIndex:0})),!0},toggleOption(e,t){f(r=>{let s=r.selectedOptions[e.id]??[],a=s.includes(t)?s.filter(e=>e!==t):[...s,t];return{...r,selectedOptions:{...r.selectedOptions,[e.id]:a}}})},checkCurrent(e){var t;let r,s,a,n,l,o,d=g.selectedOptions[e.id]??[],i=(t=g.config,r=e.answers.filter(e=>e.correct).map(e=>e.id),s=d.filter(e=>r.includes(e)).length,a=d.filter(e=>!r.includes(e)).length,n=r.length-s,l=0===a&&0===n&&d.length>0,o=0,"per-question"===t.scoring?l?o=1:"counterbalance"===t.penalty&&(o=Math.max(0,(s-a)/Math.max(r.length,1))):o=Math.max(0,s-("counterbalance"===t.penalty?a:0))/Math.max(r.length,1),{questionHash:e.hash,selected:d,isCorrect:l,partial:!l&&s>0&&0===a,score:o});return f(t=>{let r=t.results.filter(t=>t.questionHash!==e.hash);return{...t,results:[...r,i]}}),i},nextQuestion(){let e=!1;return f(t=>{let{activeQuestions:r,selectedOptions:s,currentIndex:a,results:n,config:l}=t,o=t.incorrectQuestionsLeft||!1,d=a+1,i=d>=r.length,c=n.at(-1);if(!l.repeatIncorrect||!c||!o)return i&&(e=!0),{...t,currentIndex:d%r.length,status:i?"done":t.status};if(!1===c.isCorrect?(o=!0,c.lastAttempted=!0,s[c.questionHash]=[]):c.lastAttempted=!1,n.length===r.length&&n.map(e=>e.isCorrect).every(e=>!0===e))return o=!1,e=!0,{...t,results:n,currentIndex:d%r.length,status:"done"};for(;;){let e=r[d%r.length],t=n.find(t=>t.questionHash===e.hash);if(!t||!1===t.isCorrect)break;d=(d+1)%r.length}return{...t,results:n,currentIndex:d%r.length,incorrectQuestionsLeft:o}}),e}},"selectSummary",()=>y],44602)},63723,36299,e=>{"use strict";var t=e.i(78048);let r=(0,t.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],63723);let s=(0,t.default)("frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["Frown",()=>s],36299)},44245,e=>{"use strict";var t=e.i(86143),r=e.i(56106),s=e.i(63723),a=e.i(36299);let n=(0,e.i(78048).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var l=e.i(19455),o=e.i(15288),d=e.i(44602),i=e.i(75157);function c(){let e=(0,r.useRouter)(),{activeQuestions:c,results:m}=d.quizStore.useStore(e=>({activeQuestions:e.activeQuestions,results:e.results})),h=d.quizStore.useStore(d.selectSummary);return m.length?(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{children:[(0,t.jsx)(o.CardTitle,{children:"Test summary"}),(0,t.jsxs)(o.CardDescription,{children:[c.length," questions answered. Scores calculated from your chosen rules."]})]}),(0,t.jsxs)(o.CardContent,{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsx)(u,{label:"Correct",value:h.correct,tone:"success",helper:"Fully correct"}),(0,t.jsx)(u,{label:"Partial",value:h.partial,tone:"warning",helper:"Some correct"}),(0,t.jsx)(u,{label:"Incorrect",value:h.incorrect,tone:"danger",helper:"Contains wrong picks"}),(0,t.jsx)(u,{label:"Score",value:`${h.scorePercent}%`,tone:"info",helper:"Weighted score"})]}),(0,t.jsxs)(o.CardFooter,{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(l.Button,{onClick:()=>e.push("/"),children:"Go home"}),(0,t.jsxs)(l.Button,{variant:"secondary",className:"gap-2",onClick:()=>{d.quizStore.restartProgress(),e.push("/test")},children:[(0,t.jsx)(n,{className:"size-4"})," Restart"]})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{children:[(0,t.jsx)(o.CardTitle,{children:"Question outcomes"}),(0,t.jsx)(o.CardDescription,{children:"Full prompts with your picked answers."})]}),(0,t.jsx)(o.CardContent,{className:"flex flex-col gap-4 text-sm",children:c.map(e=>{let r=m.find(t=>t.questionHash===e.hash),n=r?.selected??[];return(0,t.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsx)("p",{className:"font-medium text-slate-800 dark:text-slate-100",children:e.body}),(0,t.jsx)(x,{result:r})]}),(0,t.jsx)("div",{className:"mt-3 space-y-2",children:e.answers.map(e=>{let r=n.includes(e.id),l=e.correct;return(0,t.jsxs)("div",{className:(0,i.cn)("flex items-start gap-2 rounded-md border px-3 py-2",l?"border-emerald-200 bg-emerald-50 text-emerald-800 dark:border-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-100":r?"border-rose-200 bg-rose-50 text-rose-800 dark:border-rose-800 dark:bg-rose-900/40 dark:text-rose-100":"border-slate-200 bg-slate-50 text-slate-800 dark:border-slate-800 dark:bg-slate-900/40 dark:text-slate-100"),children:[(0,t.jsx)("div",{className:"mt-0.5 size-2 rounded-full bg-current"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:e.body}),l&&(0,t.jsx)(s.CheckCircle2,{className:"size-4 text-emerald-500"}),!l&&r&&(0,t.jsx)(a.Frown,{className:"size-4 text-rose-500"})]},e.id)})})]},e.id)})})]})]}):(0,t.jsxs)(o.Card,{className:"max-w-xl",children:[(0,t.jsxs)(o.CardHeader,{children:[(0,t.jsx)(o.CardTitle,{children:"No results yet"}),(0,t.jsx)(o.CardDescription,{children:"Finish a test run to see your summary."})]}),(0,t.jsx)(o.CardFooter,{children:(0,t.jsx)(l.Button,{onClick:()=>e.push("/"),children:"Go to welcome"})})]})}function u({label:e,value:r,helper:s,tone:a}){return(0,t.jsxs)("div",{className:(0,i.cn)("rounded-lg border p-4 shadow-sm",{success:"border-emerald-200 bg-emerald-50 text-emerald-700 dark:border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200",warning:"border-amber-200 bg-amber-50 text-amber-700 dark:border-amber-800 dark:bg-amber-900/30 dark:text-amber-200",danger:"border-rose-200 bg-rose-50 text-rose-700 dark:border-rose-800 dark:bg-rose-900/30 dark:text-rose-200",info:"border-indigo-200 bg-indigo-50 text-indigo-700 dark:border-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-200"}[a]),children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide",children:e}),(0,t.jsx)("p",{className:"text-3xl font-semibold",children:r}),(0,t.jsx)("p",{className:"text-sm",children:s})]})}function x({result:e}){return e?e.isCorrect?(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-100 px-3 py-1 text-xs font-medium text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200",children:[(0,t.jsx)(s.CheckCircle2,{className:"size-4"})," Correct"]}):e.partial?(0,t.jsx)("span",{className:"rounded-full bg-amber-100 px-3 py-1 text-xs font-medium text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:"Partial"}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-rose-100 px-3 py-1 text-xs font-medium text-rose-700 dark:bg-rose-900/40 dark:text-rose-200",children:[(0,t.jsx)(a.Frown,{className:"size-4"})," Wrong"]}):(0,t.jsx)("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:"Not checked"})}e.s(["default",()=>c],44245)},18885,e=>{e.v(t=>Promise.all(["static/chunks/2acd6379aef5bf47.js"].map(t=>e.l(t))).then(()=>t(58266)))},5708,e=>{e.v(t=>Promise.all(["static/chunks/66bd4a4d032024d8.js"].map(t=>e.l(t))).then(()=>t(38129)))}]);